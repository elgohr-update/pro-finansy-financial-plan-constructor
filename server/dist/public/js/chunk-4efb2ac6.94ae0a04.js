(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4efb2ac6"],{"0146":function(e,t,r){},"04d1":function(e,t,r){var n=r("342f"),o=n.match(/firefox\/(\d+)/i);e.exports=!!o&&+o[1]},"07ac":function(e,t,r){var n=r("23e7"),o=r("6f53").values;n({target:"Object",stat:!0},{values:function(e){return o(e)}})},"0a14":function(e,t,r){"use strict";r("7db0"),r("d3b7");function n(e,t){if(e<=10||e>=20){if(e%10===1)return t[1];if(e%10>=2&&e%10<=4)return t[2]}return t[0]}t["a"]=function(e){var t=[{id:"MONTH",desc:["месяцев","месяц","месяца"]},{id:"YEAR",desc:["лет","год","года"]},{id:"DAYS",desc:["дней","день","дня"]}],r=t.find((function(t){return t.id===e.duration_id}));return r?n(e.term,r.desc):""}},"0f80":function(e,t,r){"use strict";r("e445")},"15fd":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("a4d3"),r("b64b");function n(e,t){if(null==e)return{};var r,n,o={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function o(e,t){if(null==e)return{};var r,o,c=n(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(c[r]=e[r])}return c}},1744:function(e,t,r){"use strict";r("b7bf")},"23d4":function(e,t,r){"use strict";r("57e5")},"33b7":function(e,t,r){},"3ded":function(e,t,r){"use strict";r("8be9")},"4e82":function(e,t,r){"use strict";var n=r("23e7"),o=r("e330"),c=r("59ed"),i=r("7b0b"),a=r("07fa"),l=r("577e"),s=r("d039"),u=r("addb"),d=r("a640"),f=r("04d1"),m=r("d998"),p=r("2d00"),b=r("512c"),j=[],O=o(j.sort),g=o(j.push),h=s((function(){j.sort(void 0)})),v=s((function(){j.sort(null)})),y=d("sort"),C=!s((function(){if(p)return p<70;if(!(f&&f>3)){if(m)return!0;if(b)return b<603;var e,t,r,n,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)j.push({k:t+n,v:r})}for(j.sort((function(e,t){return t.v-e.v})),n=0;n<j.length;n++)t=j[n].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}})),E=h||!v||!y||!C,N=function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:l(t)>l(r)?1:-1}};n({target:"Array",proto:!0,forced:E},{sort:function(e){void 0!==e&&c(e);var t=i(this);if(C)return void 0===e?O(t):O(t,e);var r,n,o=[],l=a(t);for(n=0;n<l;n++)n in t&&g(o,t[n]);u(o,N(e)),r=o.length,n=0;while(n<r)t[n]=o[n++];while(n<l)delete t[n++];return t}})},"50e4":function(e,t,r){"use strict";var n=r("f2bf"),o=Object(n["defineComponent"])({name:"Files"});const c={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},i=Object(n["createVNode"])("path",{fill:"currentColor",d:"M128 384v448h768V384H128zm-32-64h832a32 32 0 0 1 32 32v512a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V352a32 32 0 0 1 32-32zm64-128h704v64H160zm96-128h512v64H256z"},null,-1);function a(e,t,r,o,a,l){return Object(n["openBlock"])(),Object(n["createBlock"])("svg",c,[i])}o.render=a,o.__file="packages/components/Files.vue",t["a"]=o},"512c":function(e,t,r){var n=r("342f"),o=n.match(/AppleWebKit\/(\d+)\./);e.exports=!!o&&+o[1]},"56ea":function(e,t,r){"use strict";r("69aa")},5780:function(e,t,r){"use strict";r("93a2")},"57e5":function(e,t,r){},"5cd6":function(e,t,r){"use strict";var n=r("f2bf"),o={class:"questionnaire--container"};function c(e,t,r,c,i,a){var l=Object(n["resolveComponent"])("questionnaire-header"),s=Object(n["resolveComponent"])("questionnaire-container");return Object(n["openBlock"])(),Object(n["createElementBlock"])("section",o,["one"===e.course?(Object(n["openBlock"])(),Object(n["createBlock"])(l,{key:0,targets:e.targets,insurance:e.insurance,selectedTargetId:e.selectedTarget.id,pivot:e.pivot,onSelectTarget:e.selectTarget,onAddStudentTarget:t[0]||(t[0]=function(t){return e.$emit("addStudentTarget")})},null,8,["targets","insurance","selectedTargetId","pivot","onSelectTarget"])):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])(s,{course:e.course,target:e.currentTarget},null,8,["course","target"])])}var i=r("b85c"),a=(r("7db0"),r("d3b7"),r("5c40")),l=(r("b0c0"),{class:"flex items-center justify-between"}),s={class:"targets flex"},u=["onClick"],d={key:0,class:"actions flex"},f={key:1,class:"btn btn--border btn--disabled"},m={key:3,class:"btn btn--green btn--disabled"},p={key:5,class:"btn btn--green btn--disabled"};function b(e,t,r,o,c,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])("header",l,[Object(n["createElementVNode"])("div",s,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.targets,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:Object(n["normalizeClass"])(["target",{selected:e.selectedTargetId===t.id}]),key:t.id,onClick:function(r){return e.$emit("selectTarget",t)}},Object(n["toDisplayString"])(t.name),11,u)})),128))]),e.pivot?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",d,[e.status?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:0,onClick:t[0]||(t[0]=function(t){return e.$store.commit("createModal",{id:"insurance-edit",data:e.insurance})}),class:"btn btn--border"},Object(n["toDisplayString"])(e.insuranceStatus)+" страховые продукты",1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",f,Object(n["toDisplayString"])(e.insuranceStatus)+" страховые продукты",1)),e.status&&e.targets.length<3?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:2,onClick:t[1]||(t[1]=function(t){e.$store.commit("addTarget","STUDENT"),e.$emit("addStudentTarget")}),class:"btn btn--green"},"Добавить цель")):e.targets.length<3?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",m,"Добавить цель")):Object(n["createCommentVNode"])("",!0),e.status&&1!==e.selectedTargetId?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",{key:4,onClick:t[2]||(t[2]=function(){return e.removeTarget&&e.removeTarget.apply(e,arguments)}),class:"btn btn--green"},"Удалить цель")):1!==e.selectedTargetId?(Object(n["openBlock"])(),Object(n["createElementBlock"])("button",p,"Удалить цель")):Object(n["createCommentVNode"])("",!0)]))])}r("a9e3"),r("07ac");var j=r("8afd"),O=Object(j["defineComponent"])({name:"QuestionnaireTableHeader",emits:["selectTarget","addStudentTarget","removeStudentTarget"],props:{targets:{type:Array,required:!0},insurance:{type:Object,required:!0},selectedTargetId:{type:Number,required:!0},pivot:{type:Boolean,default:!1}},setup:function(){var e=Object(j["inject"])("status");return{status:e}},computed:{insuranceStatus:function(){var e=Object.values(this.insurance).find((function(e){return e}));return e?"Изменить":"Добавить"}},methods:{removeTarget:function(){this.emitter.emit("removeStudentTarget",this.selectedTargetId)}}}),g=(r("1744"),r("6b0d")),h=r.n(g);const v=h()(O,[["render",b],["__scopeId","data-v-f56e335a"]]);var y=v,C={class:"container"};function E(e,t,r,o,c,i){var a=Object(n["resolveComponent"])("questionnaire-common"),l=Object(n["resolveComponent"])("questionnaire-portfolios");return Object(n["openBlock"])(),Object(n["createElementBlock"])("section",C,[Object(n["createVNode"])(a,{target:e.target,course:e.course},null,8,["target","course"]),Object(n["createVNode"])(l,{course:e.course,target:e.target},null,8,["course","target"])])}var N=function(e){return Object(n["pushScopeId"])("data-v-b59d1cfc"),e=e(),Object(n["popScopeId"])(),e},k={class:"common flex items-center justify-between"},V={class:"elements flex"},I={class:"element"},S=N((function(){return Object(n["createElementVNode"])("div",null,"Цель SMART",-1)})),B={class:"element"},T=N((function(){return Object(n["createElementVNode"])("div",null,"с учетом инфляции",-1)})),w={class:"element"},_=N((function(){return Object(n["createElementVNode"])("div",null,"срок",-1)})),x={class:"element"},q=N((function(){return Object(n["createElementVNode"])("div",null,"риск-профиль",-1)})),D=N((function(){return Object(n["createElementVNode"])("div",{class:"help--header flex items-center"},[Object(n["createElementVNode"])("span",null,"Не забудь"),Object(n["createElementVNode"])("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Object(n["createElementVNode"])("circle",{cx:"11",cy:"11",r:"10.25",stroke:"#FE7815","stroke-width":"1.5"}),Object(n["createElementVNode"])("path",{d:"M11.7078 14.2604H10.1826L10.0639 5H11.8356L11.7078 14.2604ZM10 17.0784C10 16.8125 10.0822 16.591 10.2466 16.4138C10.417 16.2306 10.6667 16.1391 10.9954 16.1391C11.3242 16.1391 11.5738 16.2306 11.7443 16.4138C11.9148 16.591 12 16.8125 12 17.0784C12 17.3442 11.9148 17.5658 11.7443 17.743C11.5738 17.9143 11.3242 18 10.9954 18C10.6667 18 10.417 17.9143 10.2466 17.743C10.0822 17.5658 10 17.3442 10 17.0784Z",fill:"#FE7815"})])],-1)})),H={key:0,class:"help--container"},L=N((function(){return Object(n["createElementVNode"])("div",null,"Ниже указано максимальное количество инструментов, которое Вы можете добавить в свой портфель:",-1)})),M=N((function(){return Object(n["createElementVNode"])("div",null,"P.S. Добавлять абсолютно все перечисленные инструменты в указанном количестве необязательно и не рекомендуется.",-1)}));function F(e,t,r,o,c,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])("section",k,[Object(n["createElementVNode"])("div",V,[Object(n["createElementVNode"])("div",I,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.target.main.data.name||"Не указана"),1),S]),Object(n["createElementVNode"])("div",B,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.FV||"Не введено"),1),T]),Object(n["createElementVNode"])("div",w,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.correctTerm),1),_]),Object(n["createElementVNode"])("div",x,[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(e.riskPortfolio),1),q])]),Object(n["createElementVNode"])("div",{class:"help",onClick:t[0]||(t[0]=function(t){return e.onHelp=!e.onHelp}),onMouseenter:t[1]||(t[1]=function(t){return e.onHelp=!0}),onMouseleave:t[2]||(t[2]=function(t){return e.onHelp=!1})},[D,Object(n["createVNode"])(n["Transition"],{name:"fade"},{default:Object(n["withCtx"])((function(){return[e.onHelp&&e.correctHelper?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",H,[Object(n["createElementVNode"])("ul",null,[Object(n["createElementVNode"])("li",null,[L,Object(n["createElementVNode"])("div",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.correctHelper.max,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:e.id},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name)+" - ",1),Object(n["createElementVNode"])("strong",null,Object(n["toDisplayString"])(e.value),1)])})),128))]),M])])])):Object(n["createCommentVNode"])("",!0)]})),_:1})],32)])}r("498a"),r("99af");var P=r("b2dc"),Q=r("0a14"),A=r("357b"),Z=Object(j["defineComponent"])({name:"QuestionnaireTableCommon",props:{target:{type:Object,required:!0},course:{type:String,required:!0}},setup:function(){var e=Object(j["inject"])("targetCurrencyId"),t=Object(j["inject"])("targetCurrencySign");return{targetCurrencyId:e,targetCurrencySign:t}},data:function(){return{elements:[],onHelp:!1,helperList:A["f"]}},computed:{correctHelper:function(){var e=this;return this.helperList.find((function(t){return t.id===e.course}))},income:function(){return Number(P["e"].getCorrectCurrency(this.target.type.sections[0].modules,String(this.targetCurrencyId)))},term:function(){return this.target.type.sections[1].modules[0].data},currentTerm:function(){return P["e"].currentTerm(this.term)},correctInflation:function(){return this.target.main.data.inflation/100},FV:function(){var e=this.target.type.sections[2].modules[0].data,t=this.target.main.data,r=Object(P["c"])(e.amount,e.currency_id,t.currency_id),n=isNaN(r)?"Не выбрано":"".concat(Object(P["k"])(r)," ").concat(t.currency_sign).trim();return n},correctTerm:function(){var e="".concat(this.term.term," ").concat(Object(Q["a"])(this.term));return e&&e.trim()||"Не выбран"},riskPortfolio:function(){var e=this.target.type.sections.find((function(e){return"portfolio-field"===e.default}));return e&&e.modules[0].data.portfolio||"Не выбран"}}});r("23d4");const $=h()(Z,[["render",F],["__scopeId","data-v-b59d1cfc"]]);var R=$,z={class:"portfolios"};function W(e,t,r,o,c,i){var a=Object(n["resolveComponent"])("questionnaire-portfolio");return Object(n["openBlock"])(),Object(n["createElementBlock"])("section",z,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.target.portfolios,(function(t,r){return Object(n["openBlock"])(),Object(n["createBlock"])(a,{key:t.id,portfolioName:r,portfolio:t,target:e.target,course:e.course},null,8,["portfolioName","portfolio","target","course"])})),128))])}var U=r("1da1"),J=r("15fd"),K=(r("96cf"),r("c740"),r("4de4"),["data-id"]),Y={class:"portfolio--name"};function G(e,t,r,o,c,i){var a=Object(n["resolveComponent"])("portfolio-categories"),l=Object(n["resolveComponent"])("portfolio-diversification");return"expertPortfolio"!==e.portfolio.id?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:0,class:"portfolio","data-id":e.portfolio.id},[Object(n["createElementVNode"])("div",Y,Object(n["toDisplayString"])(e.portfolioTitle),1),Object(n["createVNode"])(a,{portfolioId:e.portfolio.id,portfolioName:e.portfolioName,target:e.target,course:e.course,categories:e.getCategories},null,8,["portfolioId","portfolioName","target","course","categories"]),Object(n["createVNode"])(l,{course:e.course,portfolio:e.portfolio},null,8,["course","portfolio"])],8,K)):Object(n["createCommentVNode"])("",!0)}r("caad"),r("2532");var X={key:0,class:"totalPercent"},ee={class:"categories"},te={key:0,class:"tactic flex wrap-wrap"},re=["onClick"],ne=Object(n["createStaticVNode"])('<svg width="16" height="18" viewBox="0 0 16 18" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-e3e394f6="" data-v-ff0609ae><path d="M14.0461 2.24998H10.8767V1.68749C10.8767 0.757014 10.1011 0 9.14788 0H6.84282C5.88957 0 5.11403 0.757014 5.11403 1.68749V2.24998H1.94457C1.15019 2.24998 0.503906 2.88082 0.503906 3.65622V5.62496C0.503906 5.9356 0.761929 6.18746 1.08017 6.18746H1.3951L1.89296 16.3926C1.93693 17.2939 2.69544 17.9999 3.61977 17.9999H12.3709C13.2953 17.9999 14.0538 17.2939 14.0977 16.3926L14.5956 6.18746H14.9105C15.2288 6.18746 15.4868 5.9356 15.4868 5.62496V3.65622C15.4868 2.88082 14.8405 2.24998 14.0461 2.24998ZM6.26656 1.68749C6.26656 1.37734 6.52508 1.12499 6.84282 1.12499H9.14788C9.46562 1.12499 9.72414 1.37734 9.72414 1.68749V2.24998H6.26656V1.68749ZM1.65644 3.65622C1.65644 3.50115 1.7857 3.37498 1.94457 3.37498H14.0461C14.205 3.37498 14.3343 3.50115 14.3343 3.65622V5.06247C14.1567 5.06247 2.39236 5.06247 1.65644 5.06247V3.65622ZM12.9465 16.3391C12.9319 16.6395 12.679 16.8749 12.3709 16.8749H3.61977C3.31165 16.8749 3.05881 16.6395 3.04419 16.3391L2.54893 6.18746H13.4418L12.9465 16.3391Z" fill="#858995" data-v-e3e394f6="" data-v-ff0609ae></path><path d="M7.99619 15.7501C8.31443 15.7501 8.57245 15.4983 8.57245 15.1876V7.87521C8.57245 7.56457 8.31443 7.31271 7.99619 7.31271C7.67794 7.31271 7.41992 7.56457 7.41992 7.87521V15.1876C7.41992 15.4983 7.67791 15.7501 7.99619 15.7501Z" fill="#858995" data-v-e3e394f6="" data-v-ff0609ae></path><path d="M10.877 15.7501C11.1953 15.7501 11.4533 15.4983 11.4533 15.1876V7.87521C11.4533 7.56457 11.1953 7.31271 10.877 7.31271C10.5588 7.31271 10.3008 7.56457 10.3008 7.87521V15.1876C10.3008 15.4983 10.5588 15.7501 10.877 15.7501Z" fill="#858995" data-v-e3e394f6="" data-v-ff0609ae></path><path d="M5.11337 15.7501C5.43162 15.7501 5.68964 15.4983 5.68964 15.1876V7.87521C5.68964 7.56457 5.43162 7.31271 5.11337 7.31271C4.79513 7.31271 4.53711 7.56457 4.53711 7.87521V15.1876C4.53711 15.4983 4.7951 15.7501 5.11337 15.7501Z" fill="#858995" data-v-e3e394f6="" data-v-ff0609ae></path></svg>',1),oe=[ne],ce=["name"],ie={class:"total"};function ae(e,t,r,o,c,i){var a=Object(n["resolveComponent"])("portfolio-category"),l=Object(n["resolveComponent"])("files");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,["studentPortfolio"===e.portfolioId?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",X," Вы заполнили портфель на "+Object(n["toDisplayString"])(e.totalPercent)+"%, осталось "+Object(n["toDisplayString"])(e.leftTotalPercent)+"% ",1)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",ee,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.categories,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])(a,{key:t.default,category:t,portfolioId:e.portfolioId,course:e.course},null,8,["category","portfolioId","course"])})),128)),e.onTacticFiles?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",te,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.target.portfolios[e.portfolioName].sections[2].files,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:"file flex items-center justify-between",key:t._id},[Object(n["createElementVNode"])("div",null,Object(n["toDisplayString"])(t.originalname||"Безымянный файл"),1),Object(n["createElementVNode"])("div",{class:"delete",onClick:function(r){return e.emitter.emit("deleteTacticFile",{portfolioName:e.portfolioName,file:t})}},oe,8,re)])})),128)),e.target.portfolios[e.portfolioName].sections[2].files.length<5?(Object(n["openBlock"])(),Object(n["createElementBlock"])("label",{key:0,class:Object(n["normalizeClass"])(["flex items-center justify-center",{error:!e.target.portfolios[e.portfolioName].sections[2].files.length}])},[Object(n["createElementVNode"])("input",{type:"file",name:"tactic-"+e.portfolioId,multiple:"",ref:"tactic-"+e.portfolioId,onChange:t[0]||(t[0]=function(t){return e.uploadFiles(e.portfolioName)})},null,40,ce),Object(n["createElementVNode"])("span",null,"Прикрепить файлы ("+Object(n["toDisplayString"])(5-e.target.portfolios[e.portfolioName].sections[2].files.length)+")",1),Object(n["createVNode"])(l)],2)):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("div",ie,"ВСЕГО (ЯДРО+ТАКТИКА): "+Object(n["toDisplayString"])(e.total)+" "+Object(n["toDisplayString"])(e.targetCurrencySign),1)])],64)}r("d81d");var le={class:"category"},se={class:"category--title flex items-center justify-between"},ue={class:"total"};function de(e,t,r,o,c,i){var a=Object(n["resolveComponent"])("category-table");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",le,[Object(n["createElementVNode"])("div",se,[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.currentName.name),1),Object(n["createElementVNode"])("span",ue,Object(n["toDisplayString"])(e.currentText),1)]),Object(n["createVNode"])(a,{portfolioId:e.portfolioId,modules:e.category.modules,core:!e.category.optional,course:e.course},null,8,["portfolioId","modules","core","course"])])}r("ac1f"),r("5319");var fe={key:0,class:"table--container"},me={key:1,class:"table--container"};function pe(e,t,r,o,c,i){var a=Object(n["resolveComponent"])("common-table");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{class:Object(n["normalizeClass"])(["table",{green:"existingPortfolio"===e.portfolioId,yellow:"studentPortfolio"===e.portfolioId}])},[e.core?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",fe,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.coreTypes,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])(a,{key:t.id,course:e.course,portfolioId:e.portfolioId,length:e.modules.length,instruments:e.getCurrentInstruments(t.id),type:t},null,8,["course","portfolioId","length","instruments","type"])})),128))])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",me,[Object(n["createVNode"])(a,{course:e.course,portfolioId:e.portfolioId,length:e.modules.length,instruments:e.modules.filter((function(e){return e.data.name})).map((function(e){return e.data}))},null,8,["course","portfolioId","length","instruments"])]))],2)}var be=r("2909"),je=(r("159b"),r("4e82"),r("5530")),Oe=function(e){return Object(n["pushScopeId"])("data-v-6f661a7e"),e=e(),Object(n["popScopeId"])(),e},ge={key:0,class:"title"},he={colspan:"9"},ve=Oe((function(){return Object(n["createElementVNode"])("th",{style:{width:"10%"}},"Наименование",-1)})),ye=Oe((function(){return Object(n["createElementVNode"])("th",{style:{width:"10%"}},"Тикер/ISIN",-1)})),Ce=Oe((function(){return Object(n["createElementVNode"])("th",{style:{width:"10%"}},"Страна",-1)})),Ee=Oe((function(){return Object(n["createElementVNode"])("th",{style:{width:"10%"}},"Цена за 1 шт",-1)})),Ne=Oe((function(){return Object(n["createElementVNode"])("th",{style:{width:"14%"}},"% от общей суммы портфеля",-1)})),ke=Oe((function(){return Object(n["createElementVNode"])("th",{style:{width:"14%"}},"Сумма на инструмент",-1)})),Ve=Oe((function(){return Object(n["createElementVNode"])("th",{style:{width:"12%"}},"Количество",-1)})),Ie={key:0,style:{width:"10%"}},Se=Oe((function(){return Object(n["createElementVNode"])("th",{style:{width:"8%"}},null,-1)})),Be={key:0},Te=["onChange","onUpdate:modelValue"],we={key:1,class:"actions"},_e=["onClick"],xe=Oe((function(){return Object(n["createElementVNode"])("svg",{width:"19",height:"18",viewBox:"0 0 19 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[Object(n["createElementVNode"])("path",{d:"M15.1476 9.00019C14.7838 9.00019 14.489 9.288 14.489 9.64305V16.0716C14.489 16.4266 14.1941 16.7144 13.8304 16.7144H1.97577C1.61203 16.7144 1.31717 16.4266 1.31717 16.0716V3.21451C1.31717 2.85946 1.61203 2.57164 1.97577 2.57164H9.87885C10.2426 2.57164 10.5375 2.28383 10.5375 1.92878C10.5375 1.57373 10.2426 1.28595 9.87885 1.28595H1.97577C0.884582 1.28595 0 2.14939 0 3.21451V16.0716C0 17.1367 0.884582 18.0001 1.97577 18.0001H13.8304C14.9216 18.0001 15.8062 17.1367 15.8062 16.0716V9.64302C15.8062 9.288 15.5113 9.00019 15.1476 9.00019Z",fill:"#858995"}),Object(n["createElementVNode"])("path",{d:"M17.7018 0.720883C17.2289 0.259235 16.5875 -6.51637e-05 15.9187 1.01705e-05C15.2496 -0.00187318 14.6075 0.257879 14.1359 0.721298L5.46099 9.18826C5.38902 9.25904 5.33472 9.34507 5.30227 9.43961L3.98511 13.2967C3.87015 13.6336 4.05673 13.9976 4.40183 14.1098C4.46878 14.1315 4.5389 14.1427 4.60944 14.1427C4.68014 14.1426 4.75041 14.1315 4.81755 14.11L8.76908 12.8243C8.86613 12.7926 8.95431 12.7394 9.02659 12.6687L17.7015 4.20106C18.6861 3.2401 18.6862 1.68196 17.7018 0.720883ZM16.7703 3.29268L8.20861 11.6498L5.65065 12.4835L6.5022 9.98989L15.0671 1.63284C15.538 1.17413 16.3007 1.17488 16.7707 1.6345C16.9951 1.85406 17.1216 2.15129 17.1226 2.46148C17.1234 2.77333 16.9966 3.07255 16.7703 3.29268Z",fill:"#858995"})],-1)})),qe=[xe],De=["onClick"],He=Object(n["createStaticVNode"])('<svg width="16" height="18" viewBox="0 0 16 18" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-6f661a7e><path d="M14.0461 2.24998H10.8767V1.68749C10.8767 0.757014 10.1011 0 9.14788 0H6.84282C5.88957 0 5.11403 0.757014 5.11403 1.68749V2.24998H1.94457C1.15019 2.24998 0.503906 2.88082 0.503906 3.65622V5.62496C0.503906 5.9356 0.761929 6.18746 1.08017 6.18746H1.3951L1.89296 16.3926C1.93693 17.2939 2.69544 17.9999 3.61977 17.9999H12.3709C13.2953 17.9999 14.0538 17.2939 14.0977 16.3926L14.5956 6.18746H14.9105C15.2288 6.18746 15.4868 5.9356 15.4868 5.62496V3.65622C15.4868 2.88082 14.8405 2.24998 14.0461 2.24998ZM6.26656 1.68749C6.26656 1.37734 6.52508 1.12499 6.84282 1.12499H9.14788C9.46562 1.12499 9.72414 1.37734 9.72414 1.68749V2.24998H6.26656V1.68749ZM1.65644 3.65622C1.65644 3.50115 1.7857 3.37498 1.94457 3.37498H14.0461C14.205 3.37498 14.3343 3.50115 14.3343 3.65622V5.06247C14.1567 5.06247 2.39236 5.06247 1.65644 5.06247V3.65622ZM12.9465 16.3391C12.9319 16.6395 12.679 16.8749 12.3709 16.8749H3.61977C3.31165 16.8749 3.05881 16.6395 3.04419 16.3391L2.54893 6.18746H13.4418L12.9465 16.3391Z" fill="#858995" data-v-6f661a7e></path><path d="M7.99619 15.7501C8.31443 15.7501 8.57245 15.4983 8.57245 15.1876V7.87521C8.57245 7.56457 8.31443 7.31271 7.99619 7.31271C7.67794 7.31271 7.41992 7.56457 7.41992 7.87521V15.1876C7.41992 15.4983 7.67791 15.7501 7.99619 15.7501Z" fill="#858995" data-v-6f661a7e></path><path d="M10.877 15.7501C11.1953 15.7501 11.4533 15.4983 11.4533 15.1876V7.87521C11.4533 7.56457 11.1953 7.31271 10.877 7.31271C10.5588 7.31271 10.3008 7.56457 10.3008 7.87521V15.1876C10.3008 15.4983 10.5588 15.7501 10.877 15.7501Z" fill="#858995" data-v-6f661a7e></path><path d="M5.11337 15.7501C5.43162 15.7501 5.68964 15.4983 5.68964 15.1876V7.87521C5.68964 7.56457 5.43162 7.31271 5.11337 7.31271C4.79513 7.31271 4.53711 7.56457 4.53711 7.87521V15.1876C4.53711 15.4983 4.7951 15.7501 5.11337 15.7501Z" fill="#858995" data-v-6f661a7e></path></svg>',1),Le=[He],Me={key:2,class:"actions disabled"},Fe={key:0},Pe=Oe((function(){return Object(n["createElementVNode"])("td",null,null,-1)})),Qe=Oe((function(){return Object(n["createElementVNode"])("td",null,null,-1)})),Ae=Oe((function(){return Object(n["createElementVNode"])("td",null,null,-1)})),Ze=Oe((function(){return Object(n["createElementVNode"])("td",null,null,-1)})),$e=Oe((function(){return Object(n["createElementVNode"])("td",null,null,-1)})),Re=Oe((function(){return Object(n["createElementVNode"])("td",null,null,-1)})),ze={key:0},We=Oe((function(){return Object(n["createElementVNode"])("td",null,null,-1)})),Ue={key:1,class:"total"},Je={colspan:"4"};function Ke(e,t,r,o,c,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])("table",null,[Object(n["createElementVNode"])("thead",null,[e.type?(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",ge,[Object(n["createElementVNode"])("th",he,Object(n["toDisplayString"])(e.type[e.course+"_name"]),1)])):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("tr",null,[ve,ye,Ce,Ee,Ne,ke,Ve,"existingPortfolio"===e.portfolioId?(Object(n["openBlock"])(),Object(n["createElementBlock"])("th",Ie,"Дублировать в основной портфель")):Object(n["createCommentVNode"])("",!0),Se])]),Object(n["createElementVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.instruments,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:t.name,class:Object(n["normalizeClass"])({error:0===(t.percent||e.correctPercent(t))})},[Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(t.title),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(t.name),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(t["country_".concat(e.course)]),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.numberSpaces(t.price)),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(t.percent||e.correctPercent(t)),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.numberSpaces(e.currentAmount(t)))+" "+Object(n["toDisplayString"])(e.currectSignCurrency(t["currency_".concat(e.course,"_id")])),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.numberSpaces(t.number_papers)),1),"existingPortfolio"===e.portfolioId?(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",Be,[e.status?Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createElementBlock"])("input",{key:0,type:"checkbox",onChange:function(r){return e.dublicateInstrument(t)},"onUpdate:modelValue":function(e){return t.dublicateStudent=e}},null,40,Te)),[[n["vModelCheckbox"],t.dublicateStudent]]):Object(n["createCommentVNode"])("",!0)])):Object(n["createCommentVNode"])("",!0),e.status?(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",we,[Object(n["createElementVNode"])("div",{onClick:function(r){var n;return e.modal("questionnaire_instrument-edit",Object(je["a"])(Object(je["a"])({},t),{},{role:e.user.role,type:null===(n=e.type)||void 0===n?void 0:n.id,portfolioId:e.portfolioId,totalInstruments:e.totalInstruments,targetCurrencyId:e.targetCurrencyId,targetTotal:e.targetTotal,targetId:e.targetId,course:e.course}))}},qe,8,_e),Object(n["createElementVNode"])("div",{onClick:function(r){var n;return e.modal("questionnaire_instrument-remove",Object(je["a"])(Object(je["a"])({},t),{},{type:null===(n=e.type)||void 0===n?void 0:n.id,portfolioId:e.portfolioId,targetId:e.targetId}))}},Le,8,De)])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",Me))],2)})),128)),e.length<e.correctLength(e.type)&&e.status?(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",Fe,[Object(n["createElementVNode"])("td",{class:"adding",onClick:t[0]||(t[0]=function(t){var r;return e.modal("questionnaire_instrument-create",{role:e.user.role,type:null===(r=e.type)||void 0===r?void 0:r.id,portfolioId:e.portfolioId,totalInstruments:e.totalInstruments,targetCurrencyId:e.targetCurrencyId,targetTotal:e.targetTotal,targetId:e.targetId,course:e.course})})},"Добавить"),Pe,Qe,Ae,Ze,$e,Re,"existingPortfolio"===e.portfolioId?(Object(n["openBlock"])(),Object(n["createElementBlock"])("td",ze)):Object(n["createCommentVNode"])("",!0),We])):Object(n["createCommentVNode"])("",!0),e.type?(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",Ue,[Object(n["createElementVNode"])("td",Je,Object(n["toDisplayString"])(e.type[e.course+"_total"]),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.currentText),1)])):Object(n["createCommentVNode"])("",!0)])])}var Ye=r("5502"),Ge=r("7ae0"),Xe=Object(j["defineComponent"])({name:"TableElement",props:{instruments:{type:Array,required:!0},type:{type:Object},portfolioId:{type:String,required:!0},length:{type:Number,required:!0},course:{type:String,required:!0}},setup:function(){var e=Object(j["inject"])("targetCurrencyId"),t=Object(j["inject"])("targetId"),r=Object(j["inject"])("targetCurrencySign"),n=Object(j["inject"])("status"),o=Object(j["inject"])("total")||"",c=Object(j["inject"])("totalInstruments"),i=Object(j["inject"])("targetTotal");return{targetCurrencyId:e,targetId:t,targetCurrencySign:r,status:n,total:o,totalInstruments:c,targetTotal:i}},data:function(){return{lengths:[{id:"one",type:!0,number:25},{id:"one",type:!1,number:10},{id:"two",type:!0,number:58},{id:"two",type:!1,number:5}]}},computed:Object(je["a"])(Object(je["a"])({},Object(Ye["b"])(["user"])),{},{totalType:function(){return Object(P["f"])(this.instruments,String(this.targetCurrencyId),this.course).replace(/ /g,"")},currentText:function(){return"\n        ".concat(this.totalType," \n        ").concat(this.targetCurrencySign||"","\n        (").concat(Math.ceil10(Number(this.totalType)/Number(this.total.replace(/ /g,""))*100,-1)||0," %)\n      ")}}),methods:{currectSignCurrency:P["b"],dublicateInstrument:function(e){var t=Object(P["i"])(e,String(this.targetCurrencyId),this.course),r=Math.ceil10(t/Number(this.targetTotal)*100,-2);this.$store.commit("dublicateStudentInstrument",{instrument:e,percent:r,targetId:this.targetId,type:this.type})},correctLength:function(e){var t=this,r=this.lengths.find((function(r){return r.id===t.course&&r.type===!!e}));return r?r.number:30},currentAmount:function(e){var t=this.course===Ge["b"].TWO&&e.lot?e.lot:1;return e.price*t*e.number_papers},correctPercent:function(e){var t=Object(P["i"])(e,String(this.targetCurrencyId),this.course);return t?Math.ceil10(t/Number(this.total.replace(/ /g,""))*100,-1):t},modal:function(e,t){this.$store.commit("createModal",{id:e,data:t})},numberSpaces:P["k"]}});r("a288");const et=h()(Xe,[["render",Ke],["__scopeId","data-v-6f661a7e"]]);var tt=et,rt=r("6f70"),nt=Object(j["defineComponent"])({name:"CategoryTable",props:{modules:{type:Array,required:!0},core:{type:Boolean,required:!0},portfolioId:{type:String,required:!0},course:{type:String,required:!0}},data:function(){return{coreTypes:rt["b"]}},created:function(){this.modules.forEach((function(e,t){e.data.index=t})),this.course===Ge["b"].TWO&&(this.coreTypes=[].concat(Object(be["a"])(this.coreTypes),[rt["c"]]))},updated:function(){this.modules.forEach((function(e,t){e.data.index=t}))},methods:{sortInstrumentsSection:function(e){return e.sort((function(e,t){return e.section_two>t.section_two?1:e.section_two<t.section_two?-1:0}))},sortInstruments:function(e,t){if("stock"===e)return[].concat(Object(be["a"])(this.sortInstrumentsSection(t.filter((function(e){return"Акции"===e.instrument_type_two})))),Object(be["a"])(this.sortInstrumentsSection(t.filter((function(e){return"Акции"!==e.instrument_type_two})))));if("bond"===e){var r,n=rt["a"],o=[],c=Object(i["a"])(n);try{for(c.s();!(r=c.n()).done;){var a,l=r.value,s=Object(i["a"])(t);try{for(s.s();!(a=s.n()).done;){var u=a.value;u.instrument_type_two===l&&(o=[].concat(Object(be["a"])(o),[u]))}}catch(p){s.e(p)}finally{s.f()}}}catch(p){c.e(p)}finally{c.f()}var d,f=Object(i["a"])(t);try{var m=function(){var e=d.value;o.find((function(t){return t.name===e.name}))||(o=[].concat(Object(be["a"])(o),[e]))};for(f.s();!(d=f.n()).done;)m()}catch(p){f.e(p)}finally{f.f()}return o}return t},getCurrentInstruments:function(e){var t=this;if(this.course===Ge["b"].TWO){var r=this.$store.getters.mixedAssets.map((function(e){return e.name.trim().toLowerCase()}));return"mixed"===e?this.modules.filter((function(e){return r.includes(e.data.name.trim().toLowerCase())})).map((function(e){return e.data})):this.sortInstruments(e,this.modules.filter((function(n){return n.data["class_".concat(t.course,"_id")]===e&&!r.includes(n.data.name.trim().toLowerCase())})).map((function(e){return e.data})))}return this.modules.filter((function(r){return r.data["class_".concat(t.course,"_id")]===e})).map((function(e){return e.data}))}},components:{commonTable:tt}});r("3ded");const ot=h()(nt,[["render",pe],["__scopeId","data-v-744e54b6"]]);var ct=ot,it=Object(j["defineComponent"])({name:"PortfolioCategory",props:{category:{type:Object,required:!0},portfolioId:{type:String,required:!0},course:{type:String,required:!0}},setup:function(){var e=Object(j["inject"])("targetCurrencyId"),t=Object(j["inject"])("targetCurrencySign"),r=Object(j["inject"])("total")||"";return{targetCurrencyId:e,targetCurrencySign:t,total:r}},computed:{totalCategory:function(){return Object(P["f"])(this.category.modules.map((function(e){return e.data})).filter((function(e){return e.price})),String(this.targetCurrencyId),this.course).replace(/ /g,"")},currentName:function(){return this.category.name.includes("ядра")?{name:"Ядро",total:"ядро"}:{name:"Тактическая часть",total:"тактика"}},currentText:function(){return"Итого \n        ".concat(this.currentName.total,": \n        ").concat(this.totalCategory," \n        ").concat(this.targetCurrencySign||""," \n        (").concat(Math.ceil10(Number(this.totalCategory)/Number(this.total.replace(/ /g,""))*100,-1)||0," %)\n      ")}},components:{categoryTable:ct}});r("6fe3");const at=h()(it,[["render",de],["__scopeId","data-v-0287d44a"]]);var lt=at,st=r("50e4"),ut=Object(j["defineComponent"])({name:"PortfolioCategories",props:{categories:{type:Array,required:!0},target:{type:Object,required:!0},portfolioId:{type:String,required:!0},portfolioName:{type:[String,Number],required:!0},course:{type:String,required:!0}},setup:function(){var e=Object(j["inject"])("targetCurrencyId"),t=Object(j["inject"])("targetCurrencyId"),r=Object(j["inject"])("status");return{targetCurrencyId:e,targetCurrencySign:t,status:r}},provide:function(){var e=this;return{total:Object(j["computed"])((function(){return e.total})),totalInstruments:Object(j["computed"])((function(){return e.totalInstruments})),targetTotal:Object(j["computed"])((function(){return Object(P["c"])(e.target.type.sections[2].modules[0].data.amount,e.target.type.sections[2].modules[0].data.currency_id,e.target.main.data.currency_id)}))}},methods:{uploadFiles:function(e){this.emitter.emit("changeTacticFile",{portfolioName:e,files:this.$refs["tactic-"+this.portfolioId].files}),this.$refs["tactic-"+this.portfolioId].files=null}},computed:{totalInstruments:function(){var e=this.categories.map((function(e){return e.modules})).reduce((function(e,t){return e.concat(t)}));return e.map((function(e){return e.data})).filter((function(e){return e.price}))},total:function(){var e=this.categories.map((function(e){return e.modules})).reduce((function(e,t){return e.concat(t)})),t=e.map((function(e){return e.data})).filter((function(e){return e.price}));return Object(P["f"])(t,String(this.targetCurrencyId),this.course)},onTacticFiles:function(){return this.$store.getters.role===Ge["g"].STUDENT&&this.course===Ge["b"].TWO&&this.status},totalPercent:function(){var e=this.categories.map((function(e){return e.modules})).reduce((function(e,t){return e.concat(t)}));return Math.ceil10(e.map((function(e){return e.data})).reduce((function(e,t){return e+Number(t.percent)}),0),-2)},leftTotalPercent:function(){return Math.ceil10(100-this.totalPercent<=0?0:100-this.totalPercent,-2)}},components:{portfolioCategory:lt,Files:st["a"]}});r("56ea");const dt=h()(ut,[["render",ae],["__scopeId","data-v-ff0609ae"]]);var ft=dt,mt=function(e){return Object(n["pushScopeId"])("data-v-1974d862"),e=e(),Object(n["popScopeId"])(),e},pt={class:"diversification"},bt={class:"diversification--title flex items-center justify-between"},jt={class:"diversification--container flex"},Ot=mt((function(){return Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",{colspan:"2"},"Баланс ядро/тактика")])],-1)})),gt=mt((function(){return Object(n["createElementVNode"])("td",null,"Доля ядра",-1)})),ht=mt((function(){return Object(n["createElementVNode"])("td",null,"Доля тактики",-1)})),vt=mt((function(){return Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",{colspan:"2"},"Баланс ядра портфеля по классам активов")])],-1)})),yt=mt((function(){return Object(n["createElementVNode"])("td",null,"Доля акций",-1)})),Ct=mt((function(){return Object(n["createElementVNode"])("td",null,"Доля облигаций",-1)})),Et=mt((function(){return Object(n["createElementVNode"])("td",null,"Доля защитного класса",-1)})),Nt=mt((function(){return Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",{colspan:"2"},"Баланс по валюте")])],-1)}));function kt(e,t,r,o,c,i){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",pt,[Object(n["createElementVNode"])("div",bt,[Object(n["createElementVNode"])("span",null,"Диверсификация портфеля на "+Object(n["toDisplayString"])("existingPortfolio"===e.portfolio.id?"стартовую":"полную")+" сумму",1)]),Object(n["createElementVNode"])("div",jt,[Object(n["createElementVNode"])("table",null,[Ot,Object(n["createElementVNode"])("tbody",null,[Object(n["createElementVNode"])("tr",null,[gt,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.percentBalance["0"]||e.defaults.first),1)]),Object(n["createElementVNode"])("tr",null,[ht,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.percentBalance["1"]||e.defaults.first),1)])])]),Object(n["createElementVNode"])("table",null,[vt,Object(n["createElementVNode"])("tbody",null,[Object(n["createElementVNode"])("tr",null,[yt,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.percentTypes["0"]||e.defaults.second),1)]),Object(n["createElementVNode"])("tr",null,[Ct,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.percentTypes["1"]||e.defaults.second),1)]),Object(n["createElementVNode"])("tr",null,[Et,Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.percentTypes["2"]||e.defaults.second),1)])])]),Object(n["createElementVNode"])("table",null,[Nt,Object(n["createElementVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.percentCurrencies,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:e+t},[Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(t),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e),1)])})),128))])])])])}var Vt=Object(j["defineComponent"])({name:"PortfolioDiversification",props:{portfolio:{type:Object,required:!0},course:{type:String,required:!0}},setup:function(){var e=Object(j["inject"])("targetCurrencyId")||"",t=Object(j["inject"])("targetCurrencySign")||"";return{targetCurrencySign:t,targetCurrencyId:e}},data:function(){return{mixedAssets:[],defaults:{first:"Процент считается по сумме всех инструментов",second:"Процент считается по сумме всех инструментов ядра портфеля"}}},created:function(){this.getMixedAssets()},methods:{getMixedAssets:function(){var e=this;return Object(U["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.API.common.getMixeds();case 2:r=t.sent,e.mixedAssets=r.data;case 4:case"end":return t.stop()}}),t)})))()},setPercents:function(e){this.portfolio.sections[0].modules[0].data.core=e["0"]?e["0"].replace("%",""):NaN,this.portfolio.sections[0].modules[0].data.tactic=e["1"]?e["1"].replace("%",""):NaN}},computed:{percentBalance:function(){var e=this.portfolio.sections[1].modules.map((function(e){return e.data})).filter((function(e){return e.price})),t=this.portfolio.sections[2].modules.map((function(e){return e.data})).filter((function(e){return e.price})),r=Object(P["g"])(this.targetCurrencyId,this.course,this.mixedAssets,e,t);return this.setPercents(r),r},percentTypes:function(){var e=this,t=this.portfolio.sections[1].modules.map((function(e){return e.data})).filter((function(e){return e.price}));return Object(P["g"])(this.targetCurrencyId,this.course,this.mixedAssets,t.filter((function(t){return"stock"===t["class_".concat(e.course,"_id")]})),t.filter((function(t){return"bond"===t["class_".concat(e.course,"_id")]})),t.filter((function(t){return"alternative"===t["class_".concat(e.course,"_id")]})))},percentCurrencies:function(){var e=this.portfolio.sections[1].modules,t=this.portfolio.sections[2].modules,r=e.concat(t).map((function(e){return e.data})).filter((function(e){return e.price}));return Object(P["h"])(this.targetCurrencyId,r,this.course)}}});r("5780");const It=h()(Vt,[["render",kt],["__scopeId","data-v-1974d862"]]);var St=It,Bt=Object(j["defineComponent"])({name:"QuestionnaireTablePortfolio",props:{portfolio:{type:Object,required:!0},portfolioName:{type:[String,Number],required:!0},target:{type:Object,required:!0},course:{type:String,required:!0}},components:{portfolioCategories:ft,portfolioDiversification:St},computed:{getCategories:function(){var e,t=this.portfolio.sections.filter((function(e){return e.default.includes("portfolio-instrument-")})),r=Object(i["a"])(t[0].modules);try{for(r.s();!(e=r.n()).done;){var n=e.value;n.data.core=!0}}catch(o){r.e(o)}finally{r.f()}return t},portfolioTitle:function(){return this.portfolio.name.includes("Существующий")||this.portfolio.name.includes("стартовый")?this.course===Ge["b"].ONE?"Если у Вас уже есть активы, укажите их ниже:":"Портфель на стартовую сумму:":"Портфель на всю сумму цели с учетом инфляции:"}}});r("0f80");const Tt=h()(Bt,[["render",G],["__scopeId","data-v-dc1cc704"]]);var wt=Tt,_t=["type","portfolioId"],xt=["type","portfolioId"],qt=["type","portfolioId"],Dt=Object(j["defineComponent"])({setup:function(){var e=Object(j["inject"])("questionnaire_id");return{questionnaire_id:e}},name:"QuestionnaireTablePortfolios",props:{target:{type:Object,required:!0},course:{type:String,required:!0}},components:{questionnairePortfolio:wt},mounted:function(){this.emits()},unmounted:function(){this.emitter.off("createQuestionnaire",this.createQuestionnaireEmitter),this.emitter.off("editQuestionnaire",this.editQuestionnaireEmitter),this.emitter.off("errorQuestionnaireInstrument",this.errorQuestionnaireInstrumentEmitter),this.emitter.off("removeQuestionnaire",this.removeQuestionnaireEmitter),this.emitter.off("changeTacticFile",this.changeTacticFileEmitter),this.emitter.off("deleteTacticFile",this.deleteTacticFileEmitter)},methods:{emits:function(){this.emitter.on("deleteTacticFile",this.deleteTacticFileEmitter),this.emitter.on("changeTacticFile",this.changeTacticFileEmitter),this.emitter.on("createQuestionnaire",this.createQuestionnaireEmitter),this.emitter.on("errorQuestionnaireInstrument",this.errorQuestionnaireInstrumentEmitter),this.emitter.on("editQuestionnaire",this.editQuestionnaireEmitter),this.emitter.on("removeQuestionnaire",this.removeQuestionnaireEmitter)},deleteTacticFileEmitter:function(e){var t=e.portfolioName,r=e.file;this.deleteTacticFile(this.target.id,this.target.portfolios[t],t,r)},changeTacticFileEmitter:function(e){var t=e.portfolioName,r=e.files;this.saveTacticFile(this.target.id,this.target.portfolios[t],t,r)},createQuestionnaireEmitter:function(e){var t=e.type,r=e.portfolioId,n=Object(J["a"])(e,_t);try{for(var o in this.target.portfolios){var c=this.target.portfolios[o];if(c.id===r){if(n.number_papers&&n.price){var i=this.course===Ge["b"].TWO&&n.lot?n.lot:1;n.formula=Math.floor(n.number_papers*n.price*i)}if(t){var a=c.sections[1].modules.find((function(e){return e.data.name===n.name}));if(a){if(a.data.comment===n.comment&&a.data.number_papers===n.number_papers)return;a.data.number_papers=Number(a.data.number_papers)+Number(n.number_papers),a.data.percent=Number(a.data.percent)+Number(n.percent);break}this.$store.commit("addNewModule",{section:c.sections[1],indexSection:1,targetId:this.target.id,element:n})}else{var l=c.sections[2].modules.find((function(e){return e.data.name===n.name}));if(l){if(l.data.comment===n.comment&&l.data.number_papers===n.number_papers)return;l.data.number_papers=Number(l.data.number_papers)+Number(n.number_papers),l.data.percent=Number(l.data.percent)+Number(n.percent);break}this.$store.commit("addNewModule",{section:c.sections[2],indexSection:2,targetId:this.target.id,element:n})}break}}}catch(s){this.$store.commit("addError",{err:s,func:"CQS"})}},editQuestionnaireEmitter:function(e){var t=e.type,r=e.portfolioId,n=Object(J["a"])(e,xt);try{for(var o in this.target.portfolios){var c=this.target.portfolios[o];if(c.id===r){if(t){var i=c.sections[1].modules.find((function(e){return e.data.name.toLowerCase().trim()===n.name.toLowerCase().trim()}));if(!i)return;for(var a in n)i.data[a]=n[a]}else{var l=c.sections[2].modules.find((function(e){return e.data.name.toLowerCase().trim()===n.name.toLowerCase().trim()}));if(!l)return;for(var s in n)l.data[s]=n[s]}break}}}catch(u){this.$store.commit("addError",{err:u,func:"EQS"})}},removeQuestionnaireEmitter:function(e){var t=e.type,r=e.portfolioId,n=e.name,o=e.dublicateFrom;try{for(var c in this.target.portfolios){var i=this.target.portfolios[c];if(o&&c===o){var a=t?1:2,l=i.sections[a].modules.find((function(e){return e.data.name.toLowerCase().trim()===n.toLowerCase().trim()}));l&&(l.data.dublicateStudent=!1)}if(i.id===r){var s=t?1:2,u=i.sections[s].modules.findIndex((function(e){return e.data.name.toLowerCase().trim()===n.toLowerCase().trim()}));this.$store.commit("removeModule",{modules:i.sections[s].modules,indexSection:s,indexModule:u,targetId:this.target.id});break}}}catch(d){this.$store.commit("addError",{err:d,func:"RQS"})}},errorQuestionnaireInstrumentEmitter:function(e){var t=e.type,r=e.portfolioId,n=Object(J["a"])(e,qt);try{for(var o in this.target.portfolios){var c=this.target.portfolios[o];if(c.id===r){if(t){var i=c.sections[1].modules.find((function(e){return e.data.name.toLowerCase().trim()===n.name.toLowerCase().trim()}));i&&(i.data.percent=n.percent)}else{var a=c.sections[2].modules.find((function(e){return e.data.name.toLowerCase().trim()===n.name.toLowerCase().trim()}));a&&(a.data.percent=n.percent)}break}}}catch(l){this.$store.commit("addError",{err:l,func:"EQS"})}},deleteTacticFile:function(e,t,r,n){var o=this;return Object(U["a"])(regeneratorRuntime.mark((function c(){var i,a;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:return a={questionnaireId:o.questionnaire_id,targetId:e,portfolioId:r,file:n},c.next=3,o.API.questionnaire.deleteTacticFile(a,o.questionnaire_id);case 3:t.sections[2].files=null===(i=t.sections[2].files)||void 0===i?void 0:i.filter((function(e){return e.originalname!==n.originalname}));case 4:case"end":return c.stop()}}),c)})))()},saveTacticFile:function(e,t,r,n){var o=this;return Object(U["a"])(regeneratorRuntime.mark((function c(){var a,l,s,u,d,f;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:a=new FormData,l=Object(i["a"])(n);try{for(l.s();!(s=l.n()).done;)u=s.value,a.append("tactic",u)}catch(m){l.e(m)}finally{l.f()}return d={questionnaireId:o.questionnaire_id,targetId:e,portfolioId:r},c.next=6,o.API.questionnaire.saveTacticFile(a,d,o.questionnaire_id);case 6:f=c.sent,t.sections[2].files=f.data;case 8:case"end":return c.stop()}}),c)})))()}}});const Ht=h()(Dt,[["render",W]]);var Lt=Ht,Mt=Object(j["defineComponent"])({name:"QuestionnaireTableContainer",props:{target:{type:Object,required:!0},course:{type:String,required:!0}},provide:function(){var e=this;return{targetId:Object(j["computed"])((function(){return e.target.id})),targetCurrencyId:Object(j["computed"])((function(){return e.target.main.data.currency_id})),targetCurrencySign:Object(j["computed"])((function(){return e.target.main.data.currency_sign}))}},components:{questionnaireCommon:R,questionnairePortfolios:Lt}});r("b011");const Ft=h()(Mt,[["render",E],["__scopeId","data-v-6c3b39b3"]]);var Pt=Ft,Qt=Object(a["E"])({name:"QuestionnaireTableMode",emits:["addStudentTarget","removeStudentTarget"],props:{targets:{type:Array,required:!0},insurance:{type:Object,required:!0},pivot:{type:Boolean,default:!1},course:{type:String,required:!0}},mounted:function(){this.emits()},unmounted:function(){this.emitter.off("editInsurance",this.editInsuranceEmitter),this.emitter.off("changeTarget",this.changeTargetEmitter)},computed:{currentTarget:function(){var e=this;return this.targets.find((function(t){return t.id===e.selectedTarget.id}))||this.targets[0]},selectedTarget:function(){return this.targets.find((function(e){return e.selected}))||this.targets[0]}},methods:{emits:function(){this.emitter.on("editInsurance",this.editInsuranceEmitter),this.emitter.on("changeTarget",this.changeTargetEmitter)},editInsuranceEmitter:function(e){for(var t in e)this.insurance[t]=e[t]},changeTargetEmitter:function(e){var t=this.targets.find((function(t){return t.id===e}));t&&this.selectTarget(t)},selectTarget:function(e){var t,r=Object(i["a"])(this.targets);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.selected=!1}}catch(o){r.e(o)}finally{r.f()}e.selected=!0}},components:{questionnaireHeader:y,questionnaireContainer:Pt}});r("f504");const At=h()(Qt,[["render",c],["__scopeId","data-v-0617a47e"]]);t["a"]=At},"69aa":function(e,t,r){},"6c08":function(e,t,r){},"6f53":function(e,t,r){var n=r("83ab"),o=r("e330"),c=r("df75"),i=r("fc6a"),a=r("d1e7").f,l=o(a),s=o([].push),u=function(e){return function(t){var r,o=i(t),a=c(o),u=a.length,d=0,f=[];while(u>d)r=a[d++],n&&!l(o,r)||s(f,e?[r,o[r]]:o[r]);return f}};e.exports={entries:u(!0),values:u(!1)}},"6f70":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return c}));var n=[{id:"stock",one_name:"Класс актива: Акции",two_name:"Рисковая часть",one_total:"Итого акций",two_total:"Итого рисковой части"},{id:"bond",one_name:"Класс актива: Облигации",two_name:"Консервативная часть",one_total:"Итого облигаций",two_total:"Итого консервативной части"},{id:"alternative",one_name:"Защита (Альтернатива)",two_name:"Защитная часть",one_total:"Итого защита",two_total:"Итого защитной части"}],o={id:"mixed",two_name:"Смешанные фонды",two_total:"Итого смешанных фондов",one_total:"",one_name:""},c=["Вклады","Валютные счета","Деньги","Надёжные облигации","Облигации","ВДО","ETF и БПИФ на облигации"]},"6fe3":function(e,t,r){"use strict";r("0146")},"808f":function(e,t,r){},"8be9":function(e,t,r){},"93a2":function(e,t,r){},a288:function(e,t,r){"use strict";r("33b7")},addb:function(e,t,r){var n=r("4dae"),o=Math.floor,c=function(e,t){var r=e.length,l=o(r/2);return r<8?i(e,t):a(e,c(n(e,0,l),t),c(n(e,l),t),t)},i=function(e,t){var r,n,o=e.length,c=1;while(c<o){n=c,r=e[c];while(n&&t(e[n-1],r)>0)e[n]=e[--n];n!==c++&&(e[n]=r)}return e},a=function(e,t,r,n){var o=t.length,c=r.length,i=0,a=0;while(i<o||a<c)e[i+a]=i<o&&a<c?n(t[i],r[a])<=0?t[i++]:r[a++]:i<o?t[i++]:r[a++];return e};e.exports=c},b011:function(e,t,r){"use strict";r("6c08")},b7bf:function(e,t,r){},d998:function(e,t,r){var n=r("342f");e.exports=/MSIE|Trident/.test(n)},e445:function(e,t,r){},f504:function(e,t,r){"use strict";r("808f")}}]);
//# sourceMappingURL=chunk-4efb2ac6.94ae0a04.js.map