(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e74b7434"],{"0902":function(e,t,o){"use strict";o.r(t);var c=o("f2bf"),n=function(e){return Object(c["pushScopeId"])("data-v-bb1db03c"),e=e(),Object(c["popScopeId"])(),e},r={class:"distribution"},i=n((function(){return Object(c["createElementVNode"])("span",null,"Распределение на ядро и тактику",-1)})),a=[i],l={class:"distribution--container flex"},s={key:0,class:"type"},u=n((function(){return Object(c["createElementVNode"])("div",{class:"type--title"},"Ядро",-1)})),d={class:"type--container"},p={key:1,class:"type"},m=n((function(){return Object(c["createElementVNode"])("div",{class:"type--title"},"Тактика",-1)})),b={class:"type--container"},f={key:2,class:"error"},j=n((function(){return Object(c["createElementVNode"])("div",null,"Введите проценты ядра и тактики",-1)})),O=[j],y={class:"additional"},h=n((function(){return Object(c["createElementVNode"])("div",null,"Риск-профиль",-1)})),v=n((function(){return Object(c["createElementVNode"])("div",null,"Срок инв-ия",-1)})),k={key:0},E={key:1},N={key:2},V={key:3,class:"additional"},g={key:0},B=n((function(){return Object(c["createElementVNode"])("div",null,"Цель",-1)})),w={key:1},S=n((function(){return Object(c["createElementVNode"])("div",null,"Остаток",-1)}));function x(e,t,o,n,i,j){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",r,[Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])(["distribution--title flex items-center justify-between",e.portfolioId])},a,2),Object(c["createElementVNode"])("div",l,["expert"===e.portfolioId?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",s,[u,Object(c["createElementVNode"])("div",d,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"number",placeholder:"00","onUpdate:modelValue":t[0]||(t[0]=function(t){return e.portfolio.sections[0].modules[0].data.core=t}),onKeyup:t[1]||(t[1]=function(t){return e.input("core")})},null,544),[[c["vModelText"],e.portfolio.sections[0].modules[0].data.core]])])])):Object(c["createCommentVNode"])("",!0),"expert"===e.portfolioId?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",p,[m,Object(c["createElementVNode"])("div",b,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"number",placeholder:"00","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.portfolio.sections[0].modules[0].data.tactic=t}),onKeyup:t[3]||(t[3]=function(t){return e.input("tactic")})},null,544),[[c["vModelText"],e.portfolio.sections[0].modules[0].data.tactic]])])])):Object(c["createCommentVNode"])("",!0),e.portfolio.sections[0].modules[0].data.core||"expert"!==e.portfolioId?Object(c["createCommentVNode"])("",!0):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",f,O)),Object(c["createElementVNode"])("div",y,[Object(c["createElementVNode"])("div",null,[h,Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.risk),1)]),Object(c["createElementVNode"])("div",null,[v,Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.term),1)]),Object(c["createElementVNode"])("div",null,["student"===e.portfolioId?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",k,"Сумма FV студента")):Object(c["createCommentVNode"])("",!0),"existing"===e.portfolioId?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",E,"Сумма портфеля")):Object(c["createCommentVNode"])("",!0),"expert"===e.portfolioId?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",N,"Сумма FV")):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.numberSpaces(e.total))+" "+Object(c["toDisplayString"])(e.currency),1)])]),e.portfolio.sections[0].modules[0].data.core?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",V,[Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div",null,"Сумма ядра ("+Object(c["toDisplayString"])(e.portfolio.sections[0].modules[0].data.core)+"%)",1),Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.numberSpaces(e.core))+" "+Object(c["toDisplayString"])(e.currency),1)]),Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div",null,"Сумма тактики ("+Object(c["toDisplayString"])(e.portfolio.sections[0].modules[0].data.tactic)+"%)",1),Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.numberSpaces(e.tactic))+" "+Object(c["toDisplayString"])(e.currency),1)]),"expert"!==e.portfolioId?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",g,[B,Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.targetType),1)])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",w,[S,Object(c["createElementVNode"])("div",null,Object(c["toDisplayString"])(e.numberSpaces(e.remainder))+" "+Object(c["toDisplayString"])(e.currency),1)]))])):Object(c["createCommentVNode"])("",!0),e.showButton?(Object(c["openBlock"])(),Object(c["createElementBlock"])("button",{key:4,class:"btn",onClick:t[4]||(t[4]=function(){return e.percents&&e.percents.apply(e,arguments)})},"Пересчитать кол-во активов")):Object(c["createCommentVNode"])("",!0),e.showActual&&"expert"===e.portfolioId&&"two"===e.course?(Object(c["openBlock"])(),Object(c["createElementBlock"])("button",{key:5,class:"btn",onClick:t[5]||(t[5]=function(){return e.actualPrices&&e.actualPrices.apply(e,arguments)})},"Актуализировать цену активов")):Object(c["createCommentVNode"])("",!0)])])}var I=o("b85c"),_=o("1da1"),C=o("5530"),D=(o("96cf"),o("b0c0"),o("4de4"),o("d3b7"),o("d81d"),o("99af"),o("a9e3"),o("ac1f"),o("5319"),o("159b"),o("7db0"),o("498a"),o("8afd")),M=o("5502"),P=o("b2dc"),q=Object(D["defineComponent"])({name:"PortfolioExpert",props:{portfolioId:{type:String,required:!0},portfolio:{type:Object,required:!0},course:{type:String,required:!0},target:{type:Object,required:!0}},data:function(){return{showButton:!1,showActual:!0}},computed:Object(C["a"])(Object(C["a"])({},Object(M["b"])(["uncombine"])),{},{targetType:function(){return this.target.type.name},currency:function(){return this.target.main.data.currency_sign},currency_id:function(){return this.target.main.data.currency_id},total:function(){if("existing"===this.portfolioId){var e=Object(P["f"])(this.portfolio.sections[1].modules.concat(this.portfolio.sections[2].modules).map((function(e){return e.data})).filter((function(e){return e.name&&e.price})),this.currency_id,this.course);return Number(e.replace(/ /g,""))}if("expert"===this.portfolioId){var t=this.target.main.data,o=t.inflation,c=t.profitability,n=this.target.type.sections[1].modules[0].data,r=o/100,i=c/100||.1,a=this.target.type.sections[0].modules[0].data.amount,l=Object(P["d"])(n),s=Number(Object(P["a"])(a,r,l)),u=12*s/i;return 2===this.target.type.id&&(s=u),"one"===this.course&&this.uncombine&&(s=this.target.type.sections[3].modules[0].data.fv.replace(" ".concat(this.currency),"")),s}return this.target.type.sections[2].modules[0].data.amount},term:function(){var e=this.target.type.sections[1].modules[0].data;return"".concat(e.term," ").concat(e.duration)},risk:function(){return"".concat(this.target.type.sections[5].modules[0].data.portfolio)},tactic:function(){var e=this.total*(this.portfolio.sections[0].modules[0].data.tactic/100);return Math.ceil10(e,-2)},core:function(){var e=this.total*(this.portfolio.sections[0].modules[0].data.core/100);return Math.ceil10(e,-2)},remainder:function(){var e=Object(P["f"])(this.portfolio.sections[1].modules.map((function(e){return e.data})).filter((function(e){return e.name&&e.price})),this.currency_id,this.course);return 0===this.portfolio.sections[1].modules.map((function(e){return e.data})).filter((function(e){return e.name&&e.price})).length&&(e="0"),this.core-Number(e.replace(/ /g,""))}}),methods:{numberSpaces:P["k"],input:function(e){var t=Number(this.portfolio.sections[0].modules[0].data[e]);t>100&&(this.portfolio.sections[0].modules[0].data[e]=100,this.portfolio.sections[0].modules[0].data["core"===e?"tactic":"core"]=0),this.portfolio.sections[0].modules[0].data["core"===e?"tactic":"core"]=100-this.portfolio.sections[0].modules[0].data[e],this.showButton=!0},percents:function(){var e=this,t=this.core,o=this.target.main.data.currency_id;this.portfolio.sections[1].modules.forEach((function(c){c.data.number_papers=Math.floor(t*(+c.data.percent/100)/Object(P["j"])(c.data,o,e.course))})),this.showButton=!1},actualPrices:function(){var e=this;return Object(_["a"])(regeneratorRuntime.mark((function t(){var o,c,n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=e.portfolio.sections[1].modules.filter((function(e){return e.data.name&&e.data.price})).map((function(e){return{name:e.data.name,currency_two_id:e.data.currency_two_id,lot:e.data.lot,number_papers:e.data.number_papers}})),t.next=3,e.API.instrument.actualPrices({instruments:o});case 3:c=t.sent,n=Object(I["a"])(c.data);try{for(i=function(){var t=r.value,o=e.portfolio.sections[1].modules.find((function(e){return e.data.name.trim().toLowerCase()===t.name.trim().toLowerCase()}));if(o){o.data.price=t.price||o.data.price,o.data.formula=t.formula||o.data.formula;var c=Object(P["i"])(o.data,e.target.main.data.currency_id,e.course);o.data.percent=Math.ceil10(c/e.core*100,-2)}},n.s();!(r=n.n()).done;)i()}catch(a){n.e(a)}finally{n.f()}e.showActual=!1;case 7:case"end":return t.stop()}}),t)})))()}}}),A=(o("0a61"),o("6b0d")),T=o.n(A);const F=T()(q,[["render",x],["__scopeId","data-v-bb1db03c"]]);t["default"]=F},"0a61":function(e,t,o){"use strict";o("1d78")},"1d78":function(e,t,o){}}]);
//# sourceMappingURL=chunk-e74b7434.8c9e2a69.js.map