(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6131960e"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},3315:function(e,t,n){},"41f2":function(e,t,n){"use strict";n.r(t);var c=n("f2bf");function a(e,t,n,a,r,o){var s=Object(c["resolveComponent"])("AnalyticsMain");return Object(c["openBlock"])(),Object(c["createBlock"])(s)}var r=n("8afd"),o=(n("b0c0"),n("ac1f"),n("841c"),function(e){return Object(c["pushScopeId"])("data-v-7b69355d"),e=e(),Object(c["popScopeId"])(),e}),s={class:"analytics"},i={class:"analytics--container"},l={class:"block common flex"},u={class:"actions"},d=o((function(){return Object(c["createElementVNode"])("div",{class:"title"},"Общая статистика:",-1)})),m={class:"container"},b={class:"name"},p={class:"value"},j={class:"actions"},O=o((function(){return Object(c["createElementVNode"])("div",{class:"title"},"Среднее время проверки работ по месяцам (мин):",-1)})),f={class:"container"},v={class:"name"},g={class:"value"},k={key:0,class:"block"},h={class:"actions list"},y={key:0,class:"search"},E={class:"actions selected"};function x(e,t,n,a,r,o){var x=Object(c["resolveComponent"])("actions"),B=Object(c["resolveComponent"])("experts"),w=Object(c["resolveComponent"])("pagination");return Object(c["openBlock"])(),Object(c["createElementBlock"])("section",s,[Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("div",l,[Object(c["createElementVNode"])("div",u,[d,Object(c["createElementVNode"])("div",m,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.commonList,(function(t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"common flex",key:t.id},[Object(c["createElementVNode"])("div",b,Object(c["toDisplayString"])(t.name),1),Object(c["createElementVNode"])("div",p,Object(c["toDisplayString"])(e.common[t.id]),1)])})),128))])]),Object(c["createElementVNode"])("div",j,[O,Object(c["createElementVNode"])("div",f,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.averageList,(function(t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"common flex",key:t.id},[Object(c["createElementVNode"])("div",v,Object(c["toDisplayString"])(t.name),1),Object(c["createElementVNode"])("div",g,Object(c["toDisplayString"])(e.average[t.id]),1)])})),128))])])]),e.access?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",k,[Object(c["createElementVNode"])("div",h,[Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])(["action",{selected:"actions"===e.selected}]),onClick:t[0]||(t[0]=function(t){return e.selected="actions"})},"Список всех действий",2),Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])(["action",{selected:"expert"===e.selected}]),onClick:t[1]||(t[1]=function(t){return e.selected="expert"})},"Среднее время проверки работ за последние 30 дней",2)]),"actions"===e.selected?(Object(c["openBlock"])(),Object(c["createElementBlock"])("label",y,[Object(c["createElementVNode"])("img",{src:"/images/common/search.svg",alt:"",onClick:t[2]||(t[2]=function(){return e.onSearch&&e.onSearch.apply(e,arguments)})}),Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",placeholder:"Поиск по действию...","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.query.search=t}),onKeyup:t[4]||(t[4]=Object(c["withKeys"])((function(){return e.onSearch&&e.onSearch.apply(e,arguments)}),["enter"]))},null,544),[[c["vModelText"],e.query.search]])])):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("div",E,["actions"===e.selected?(Object(c["openBlock"])(),Object(c["createBlock"])(x,{key:0,actions:e.actions},null,8,["actions"])):Object(c["createCommentVNode"])("",!0),"expert"===e.selected?(Object(c["openBlock"])(),Object(c["createBlock"])(B,{key:1,experts:e.experts},null,8,["experts"])):Object(c["createCommentVNode"])("",!0)])])):Object(c["createCommentVNode"])("",!0),"actions"===e.selected&&e.actions.length>0&&e.staff?(Object(c["openBlock"])(),Object(c["createBlock"])(w,{key:1,query:e.query,total:e.totalActions,onSelectPage:e.page},null,8,["query","total","onSelectPage"])):Object(c["createCommentVNode"])("",!0)])])}var B=n("1da1"),w=n("5530"),N=(n("96cf"),n("caad"),n("2532"),n("5502")),V=n("65ee"),C=n("7ae0"),A=function(e){return Object(c["pushScopeId"])("data-v-1b639a8b"),e=e(),Object(c["popScopeId"])(),e},S=A((function(){return Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",null,[Object(c["createElementVNode"])("th",{style:{width:"15%"}},"Сотрудник"),Object(c["createElementVNode"])("th",{style:{width:"15%"}},"Дата"),Object(c["createElementVNode"])("th",{style:{width:"70%"}},"Действие")])],-1)})),I={key:0},P={key:1},q={key:2};function R(e,t,n,a,r,o){return Object(c["openBlock"])(),Object(c["createElementBlock"])("table",null,[S,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.actions,(function(t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:t._id},[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.variables,(function(n){return Object(c["openBlock"])(),Object(c["createElementBlock"])("td",{key:n},["owner"===n?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",I,Object(c["toDisplayString"])(t.owner?t.owner.name||t.owner.email:""),1)):"createdAt"===n?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",P,Object(c["toDisplayString"])(e.dateFilter(t.createdAt,"datetime")),1)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",q,Object(c["toDisplayString"])(t[n]),1))])})),128))])})),128))])])}var L=n("9011"),D=Object(r["defineComponent"])({name:"AnalyticsActions",data:function(){return{variables:["owner","createdAt","message"]}},methods:{dateFilter:L["a"]},props:{actions:{type:Array,required:!0}}}),_=(n("deea"),n("6b0d")),F=n.n(_);const M=F()(D,[["render",R],["__scopeId","data-v-1b639a8b"]]);var T=M,z=function(e){return Object(c["pushScopeId"])("data-v-793a3b05"),e=e(),Object(c["popScopeId"])(),e},X={class:"experts flex wrap-wrap"},J={class:"name"},K=z((function(){return Object(c["createElementVNode"])("div",null,null,-1)})),Q={class:"minutes"};function U(e,t,n,a,r,o){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",X,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(e.experts,(function(e){return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",{class:"expert flex justify-between",key:e.expert},[Object(c["createElementVNode"])("div",J,Object(c["toDisplayString"])(e.expert),1),K,Object(c["createElementVNode"])("div",Q,Object(c["toDisplayString"])(e.minutes)+" мин.",1)])})),128))])}var H=Object(r["defineComponent"])({name:"AnalyticsExperts",props:{experts:{type:Array,required:!0}}});n("7430");const W=F()(H,[["render",U],["__scopeId","data-v-793a3b05"]]);var Y=W,$=Object(r["defineComponent"])({name:"AnalyticsMain",data:function(){return{common:{},query:{limit:20,page:1,search:""},totalActions:0,average:{},commonList:[{id:"questionnaires",name:"Кол-во сданных работ моими студентами:"},{id:"completedQuestionnaires",name:"Кол-во проверенных мною работ:"}],averageList:[{id:"august",name:"Среднее время проверки работ в августе:"},{id:"september",name:"Среднее время проверки работ в сентябре:"},{id:"october",name:"Среднее время проверки работ в октябре:"},{id:"november",name:"Среднее время проверки работ в ноябре:"},{id:"december",name:"Среднее время проверки работ в декабре:"}],actions:[],experts:[],selected:"actions",access:!1}},computed:Object(w["a"])(Object(w["a"])({},Object(N["b"])(["user"])),{},{staff:function(){var e=this.user;return e&&(e.accesses.includes(C["g"].EXPERT)||e.role===C["g"].SUPPORT||e.role===C["g"].OWNER)}}),mounted:function(){this.user.role!==C["g"].EXPERT||this.user.accesses.includes(C["g"].EXPERT)?(this.access=!0,this.getCommon(),this.getExperts(),this.getCommonList()):this.getCommonExpert(),this.getAverage(),this.getActions()},components:{Actions:T,Experts:Y,Pagination:V["a"]},methods:{onSearch:function(){this.getActions()},getCommon:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.API.analytics.getCommon();case 2:n=t.sent,e.common=n.data;case 4:case"end":return t.stop()}}),t)})))()},getCommonExpert:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.API.analytics.getCommonExpert();case 2:n=t.sent,e.common=n.data;case 4:case"end":return t.stop()}}),t)})))()},getAverage:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.API.analytics.getAverage();case 2:n=t.sent,e.average=n.data;case 4:case"end":return t.stop()}}),t)})))()},getActions:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.API.analytics.getActions({params:e.query});case 2:n=t.sent,e.actions=n.data,e.totalActions=n.total;case 5:case"end":return t.stop()}}),t)})))()},getExperts:function(){var e=this;return Object(B["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.API.analytics.getExperts();case 2:n=t.sent,e.experts=n.data;case 4:case"end":return t.stop()}}),t)})))()},getCommonList:function(){this.commonList=[{id:"students",name:"Всего студентов:"},{id:"questionnairesLength",name:"Всего работ:"},{id:"questionnaires",name:"Кол-во сданных работ студентами:"},{id:"completedQuestionnaires",name:"Кол-во проверенных работ экспертами:"}]},page:function(e){this.query.page=e,this.getActions()}}});n("80c6");const G=F()($,[["render",x],["__scopeId","data-v-7b69355d"]]);var Z=G,ee=Object(r["defineComponent"])({name:"Analytics",components:{AnalyticsMain:Z}});const te=F()(ee,[["render",a]]);t["default"]=te},"65ee":function(e,t,n){"use strict";var c=n("f2bf"),a={class:"table--pagination flex justify-end"};function r(e,t,n,r,o,s){var i=Object(c["resolveComponent"])("el-pagination");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",a,[Object(c["createVNode"])(i,{background:"",onCurrentChange:e.onSelectPage,layout:"prev, pager, next","page-size":e.query.limit,total:e.total},null,8,["onCurrentChange","page-size","total"])])}n("a9e3");var o=n("8afd"),s=Object(o["defineComponent"])({emits:["selectPage"],name:"TablePagination",props:{total:{type:Number,required:!0},query:{type:Object,required:!0}},methods:{onSelectPage:function(e){this.$emit("selectPage",e)}}}),i=(n("8a74"),n("6b0d")),l=n.n(i);const u=l()(s,[["render",r],["__scopeId","data-v-7455ea10"]]);t["a"]=u},7430:function(e,t,n){"use strict";n("3315")},"80c6":function(e,t,n){"use strict";n("cef3")},"841c":function(e,t,n){"use strict";var c=n("c65b"),a=n("d784"),r=n("825a"),o=n("1d80"),s=n("129f"),i=n("577e"),l=n("dc4a"),u=n("14c3");a("search",(function(e,t,n){return[function(t){var n=o(this),a=void 0==t?void 0:l(t,e);return a?c(a,t,n):new RegExp(t)[e](i(n))},function(e){var c=r(this),a=i(e),o=n(t,c,a);if(o.done)return o.value;var l=c.lastIndex;s(l,0)||(c.lastIndex=0);var d=u(c,a);return s(c.lastIndex,l)||(c.lastIndex=l),null===d?-1:d.index}]}))},"8a74":function(e,t,n){"use strict";n("f22e")},9011:function(e,t,n){"use strict";n("caad"),n("2532"),n("99af"),n("a15b");var c=n("8922");t["a"]=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"date",n=new Date(e),a=[];return t.includes("date")&&a.push("".concat(Object(c["a"])(n.getDate()),".").concat(Object(c["a"])(n.getMonth()+1),".").concat(n.getFullYear())),t.includes("time")&&a.push("".concat(Object(c["a"])(n.getHours()),":").concat(Object(c["a"])(n.getMinutes()))),a.join(" ")}},"9b3e":function(e,t,n){},cef3:function(e,t,n){},deea:function(e,t,n){"use strict";n("9b3e")},f22e:function(e,t,n){}}]);
//# sourceMappingURL=chunk-6131960e.9212e1a0.js.map